{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\straw\\\\Desktop\\\\personal\\\\fabflix-remake\\\\front-end\\\\src\\\\contexts\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext({\n  items: [],\n  getQuantity: () => {},\n  addOne: () => {},\n  removeOne: () => {},\n  removeFromCart: () => {},\n  getTotalCost: () => {}\n});\nexport function CartProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cart, setCart] = useState([]);\n\n  // Fetches price from database for specific movie\n  const fetchPrice = async movieId => {\n    return fetch(`http://localhost:5000/api/cart/price?movieId=${movieId}`).then(response => response.json()).then(jsonData => jsonData.price).catch(error => {\n      console.error('Error fetching data:', error);\n      return null; // Return null or some default value in case of error\n    });\n  };\n\n  // Get title of movie given id\n  const getTitle = id => {\n    var _cart$find;\n    const title = (_cart$find = cart.find(item => item.id === id)) === null || _cart$find === void 0 ? void 0 : _cart$find.title;\n    return title;\n  };\n\n  // Return 0 if item not found, else return the quantity\n  const getQuantity = id => {\n    var _cart$find2;\n    const quantity = (_cart$find2 = cart.find(item => item.id === id)) === null || _cart$find2 === void 0 ? void 0 : _cart$find2.quantity;\n    if (quantity === undefined) {\n      return 0;\n    }\n    return quantity;\n  };\n\n  // Add 1 quantity of an item to the cart\n  const addOne = async (id, title) => {\n    const quantity = getQuantity(id);\n    if (quantity === 0) {\n      // item not in cart\n      const fetchedPrice = await fetchPrice(id);\n      setCart([...cart, {\n        id: id,\n        title: title,\n        quantity: 1,\n        price: parseFloat(fetchedPrice)\n      }]);\n    } else {\n      // item is in cart\n      // map over and find id, add 1 to quantity or return same object\n      setCart(cart.map(item => item.id === id ? {\n        ...item,\n        quantity: item.quantity + 1\n      } : item));\n    }\n  };\n\n  // Remove 1 quantity of an item in cart\n  const removeOne = id => {\n    const quantity = getQuantity(id);\n    if (quantity === 1) {\n      // 1 item in cart\n      removeFromCart(id);\n    } else {\n      setCart(cart.map(item => item.id === id ? {\n        ...item,\n        quantity: item.quantity - 1\n      } : item));\n    }\n  };\n\n  // Remove whole item from cart\n  const removeFromCart = id => {\n    setCart(cart => cart.filter(currentItem => {\n      // add items into [] that have different id\n      return currentItem.id !== id;\n    }));\n  };\n\n  // Get total cost of cart\n  const getTotalCost = () => {\n    const totalCost = cart.reduce((acc, item) => acc + item.quantity * item.price, 0);\n    return totalCost;\n  };\n  const contextValue = {\n    items: cart,\n    getQuantity,\n    addOne,\n    removeOne,\n    removeFromCart,\n    getTotalCost\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n}\n_s(CartProvider, \"ZqFaEIYkzI5UoYUmTgmqHbYYm/0=\");\n_c = CartProvider;\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useState","jsxDEV","_jsxDEV","CartContext","items","getQuantity","addOne","removeOne","removeFromCart","getTotalCost","CartProvider","_ref","_s","children","cart","setCart","fetchPrice","movieId","fetch","then","response","json","jsonData","price","catch","error","console","getTitle","id","_cart$find","title","find","item","_cart$find2","quantity","undefined","fetchedPrice","parseFloat","map","filter","currentItem","totalCost","reduce","acc","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/straw/Desktop/personal/fabflix-remake/front-end/src/contexts/CartContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\r\n\r\n\r\nexport const CartContext = createContext({\r\n    items: [],\r\n    getQuantity: () => {},\r\n    addOne: () => {},\r\n    removeOne: () => {},\r\n    removeFromCart: () => {},\r\n    getTotalCost: () => {},\r\n});\r\n\r\nexport function CartProvider ({ children }) {\r\n    const [cart, setCart] = useState([]);\r\n\r\n    // Fetches price from database for specific movie\r\n    const fetchPrice = async (movieId) => {\r\n        return fetch(`http://localhost:5000/api/cart/price?movieId=${movieId}`)\r\n        .then(response => response.json())\r\n        .then(jsonData => jsonData.price)\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n            return null; // Return null or some default value in case of error\r\n        });\r\n    }\r\n\r\n    // Get title of movie given id\r\n    const getTitle = (id) => {\r\n        const title = cart.find( item => item.id === id )?.title;\r\n\r\n        return title;\r\n    }\r\n\r\n    // Return 0 if item not found, else return the quantity\r\n    const getQuantity = (id) => {\r\n        const quantity = cart.find( item => item.id === id)?.quantity;\r\n\r\n        if ( quantity === undefined ){\r\n            return 0;\r\n        }\r\n\r\n        return quantity;\r\n    }\r\n\r\n    // Add 1 quantity of an item to the cart\r\n    const addOne = async (id, title) => {\r\n        const quantity = getQuantity(id);\r\n        \r\n        if ( quantity === 0 ) { // item not in cart\r\n            const fetchedPrice = await fetchPrice(id);\r\n            setCart(\r\n                [\r\n                    ...cart, \r\n                    { id: id, title: title, quantity: 1, price: parseFloat(fetchedPrice) }\r\n                ])\r\n        } else { // item is in cart\r\n            // map over and find id, add 1 to quantity or return same object\r\n            setCart( cart.map( \r\n                item => item.id === id \r\n                ? { ...item, quantity: item.quantity + 1}\r\n                : item\r\n            ))\r\n        }\r\n    }\r\n\r\n    // Remove 1 quantity of an item in cart\r\n    const removeOne = (id) => {\r\n        const quantity = getQuantity(id);\r\n        \r\n        if ( quantity === 1 ) { // 1 item in cart\r\n            removeFromCart(id);\r\n        } else { \r\n            setCart( cart.map( \r\n                item => item.id === id \r\n                ? { ...item, quantity: item.quantity - 1}\r\n                : item\r\n            ))\r\n        }\r\n    }\r\n\r\n    // Remove whole item from cart\r\n    const removeFromCart = (id) => {\r\n        setCart(\r\n            cart => cart.filter(currentItem => { // add items into [] that have different id\r\n                return currentItem.id !== id;\r\n            })\r\n        )\r\n    }\r\n\r\n    // Get total cost of cart\r\n    const getTotalCost = () => {\r\n        const totalCost = cart.reduce((acc, item) => acc + (item.quantity * item.price), 0);\r\n        return totalCost;\r\n    }\r\n\r\n    const contextValue = {\r\n        items: cart,\r\n        getQuantity,\r\n        addOne,\r\n        removeOne,\r\n        removeFromCart,\r\n        getTotalCost,\r\n    };\r\n\r\n    return (\r\n        <CartContext.Provider value={contextValue}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n}\r\n\r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}