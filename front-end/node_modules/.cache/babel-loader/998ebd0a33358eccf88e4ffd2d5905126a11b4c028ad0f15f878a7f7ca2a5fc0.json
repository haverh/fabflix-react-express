{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\straw\\\\Desktop\\\\personal\\\\fabflix-remake\\\\front-end\\\\src\\\\contexts\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext({\n  items: [],\n  getQuantity: () => {},\n  addOne: () => {},\n  removeOne: () => {},\n  removeFromCart: () => {},\n  getTotalCost: () => {}\n});\nfunction CartProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cart, setCart] = useState([]);\n\n  // Fetches price from database for specific movie\n  const fetchPrice = async movieId => {\n    return fetch(`http://localhost:5000/api/cart/price?movieId=${movieId}`).then(response => response.json()).then(jsonData => jsonData.price).catch(error => {\n      console.error('Error fetching data:', error);\n      return null; // Return null or some default value in case of error\n    });\n  };\n\n  // Return 0 if item not found, else return the quantity\n  const getQuantity = id => {\n    var _cart$find;\n    const quantity = (_cart$find = cart.find(item => item.id === id)) === null || _cart$find === void 0 ? void 0 : _cart$find.quantity;\n    if (quantity === undefined) {\n      return 0;\n    }\n    return quantity;\n  };\n\n  // Add 1 quantity of an item to the cart\n  const addOne = async id => {\n    const quantity = getQuantity(id);\n    if (quantity === 0) {\n      // item not in cart\n      const fetchedPrice = await fetchPrice(id);\n      setCart([...cart, {\n        id: id,\n        quantity: 1,\n        price: fetchedPrice\n      }]);\n    } else {\n      // item is in cart\n      // map over and find id, add 1 to quantity or return same object\n      setCart(cart.map(item => item.id === id ? {\n        ...item,\n        quantity: item.quantity + 1\n      } : item));\n    }\n  };\n\n  // Remove 1 quantity of an item in cart\n  const removeOne = id => {\n    const quantity = getItemQuantity(id);\n    if (quantity === 1) {\n      // 1 item in cart\n      removeFromCart(id);\n    } else {\n      setCart(cart.map(item => item.id === id ? {\n        ...item,\n        quantity: item.quantity - 1\n      } : item));\n    }\n  };\n\n  // Remove whole item from cart\n  const removeFromCart = id => {\n    setCart(cart => cart.filter(currentItem => {\n      // add items into [] that have different id\n      return currentItem.id != id;\n    }));\n  };\n\n  // Get total cost of cart\n  const getTotalCost = () => {\n    const totalCost = cart.reduce((acc, item) => acc + item.quantity * item.price, 0);\n    return totalCost;\n  };\n  const contextValue = {\n    items: cart,\n    getQuantity,\n    addOne,\n    removeOne,\n    removeFromCart,\n    getTotalCost\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n}\n_s(CartProvider, \"ZqFaEIYkzI5UoYUmTgmqHbYYm/0=\");\n_c = CartProvider;\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useState","jsxDEV","_jsxDEV","CartContext","items","getQuantity","addOne","removeOne","removeFromCart","getTotalCost","CartProvider","_ref","_s","children","cart","setCart","fetchPrice","movieId","fetch","then","response","json","jsonData","price","catch","error","console","id","_cart$find","quantity","find","item","undefined","fetchedPrice","map","getItemQuantity","filter","currentItem","totalCost","reduce","acc","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/straw/Desktop/personal/fabflix-remake/front-end/src/contexts/CartContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\r\n\r\n\r\nconst CartContext = createContext({\r\n    items: [],\r\n    getQuantity: () => {},\r\n    addOne: () => {},\r\n    removeOne: () => {},\r\n    removeFromCart: () => {},\r\n    getTotalCost: () => {},\r\n});\r\n\r\nfunction CartProvider ({ children }) {\r\n    const [cart, setCart] = useState([]);\r\n\r\n    // Fetches price from database for specific movie\r\n    const fetchPrice = async (movieId) => {\r\n        return fetch(`http://localhost:5000/api/cart/price?movieId=${movieId}`)\r\n        .then(response => response.json())\r\n        .then(jsonData => jsonData.price)\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n            return null; // Return null or some default value in case of error\r\n        });\r\n    }\r\n\r\n    // Return 0 if item not found, else return the quantity\r\n    const getQuantity = (id) => {\r\n        const quantity = cart.find( item => item.id === id)?.quantity;\r\n\r\n        if ( quantity === undefined ){\r\n            return 0;\r\n        }\r\n\r\n        return quantity;\r\n    }\r\n\r\n    // Add 1 quantity of an item to the cart\r\n    const addOne = async (id) => {\r\n        const quantity = getQuantity(id);\r\n        \r\n        if ( quantity === 0 ) { // item not in cart\r\n            const fetchedPrice = await fetchPrice(id);\r\n            setCart(\r\n                [\r\n                    ...cart, \r\n                    { id: id, quantity: 1, price: fetchedPrice }\r\n                ])\r\n        } else { // item is in cart\r\n            // map over and find id, add 1 to quantity or return same object\r\n            setCart( cart.map( \r\n                item => item.id === id \r\n                ? { ...item, quantity: item.quantity + 1}\r\n                : item\r\n            ))\r\n        }\r\n    }\r\n\r\n    // Remove 1 quantity of an item in cart\r\n    const removeOne = (id) => {\r\n        const quantity = getItemQuantity(id);\r\n        \r\n        if ( quantity === 1 ) { // 1 item in cart\r\n            removeFromCart(id);\r\n        } else { \r\n            setCart( cart.map( \r\n                item => item.id === id \r\n                ? { ...item, quantity: item.quantity - 1}\r\n                : item\r\n            ))\r\n        }\r\n    }\r\n\r\n    // Remove whole item from cart\r\n    const removeFromCart = (id) => {\r\n        setCart(\r\n            cart => cart.filter(currentItem => { // add items into [] that have different id\r\n                return currentItem.id != id;\r\n            })\r\n        )\r\n    }\r\n\r\n    // Get total cost of cart\r\n    const getTotalCost = () => {\r\n        const totalCost = cart.reduce((acc, item) => acc + (item.quantity * item.price), 0);\r\n        return totalCost;\r\n    }\r\n\r\n    const contextValue = {\r\n        items: cart,\r\n        getQuantity,\r\n        addOne,\r\n        removeOne,\r\n        removeFromCart,\r\n        getTotalCost,\r\n    };\r\n\r\n    return (\r\n        <CartContext.Provider value={contextValue}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n}\r\n\r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}